!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="ce6f6905-1b16-4a74-8b3e-3e1bb545e0c2",e._sentryDebugIdIdentifier="sentry-dbid-ce6f6905-1b16-4a74-8b3e-3e1bb545e0c2")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1915],{16463:function(e,t,n){var r=n(71169);n.o(r,"redirect")&&n.d(t,{redirect:function(){return r.redirect}}),n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})},31877:function(e,t,n){n.d(t,{default:function(){return i.a}});var r=n(84080),i=n.n(r)},99371:function(e,t,n){n.d(t,{E1:function(){return u},Ei:function(){return o},M6:function(){return g},Oo:function(){return r},Q9:function(){return i},Ui:function(){return c},ey:function(){return l},ky:function(){return f},ni:function(){return a},og:function(){return d},xW:function(){return s},yb:function(){return h}});let r=1,i="5.0.2",a="glean_ping_info",s="glean_client_info",o="c0ffeec0-ffee-c0ff-eec0-ffeec0ffeec0",l="https://incoming.telemetry.mozilla.org",c="deletion-request",u="events",d=5,g="#glean_reference_time",f="#glean_execution_counter",h=[f,g]},8921:function(e,t,n){n.d(t,{_:function(){return a}});var r=n(4547);let i="core.Context";class a{constructor(){this.initialized=!1,this.testing=!1,this.supportedMetrics={},this.startTime=new Date}static get instance(){return a._instance||(a._instance=new a),a._instance}static testUninitialize(){a._instance=void 0}static get uploadEnabled(){return void 0===a.instance.uploadEnabled&&(0,r.Z)(i,["Attempted to access Context.uploadEnabled before it was set. This may cause unexpected behaviour."],r.G.Trace),a.instance.uploadEnabled}static set uploadEnabled(e){a.instance.uploadEnabled=e}static get metricsDatabase(){return void 0===a.instance.metricsDatabase&&(0,r.Z)(i,["Attempted to access Context.metricsDatabase before it was set. This may cause unexpected behaviour."],r.G.Trace),a.instance.metricsDatabase}static set metricsDatabase(e){a.instance.metricsDatabase=e}static get eventsDatabase(){return void 0===a.instance.eventsDatabase&&(0,r.Z)(i,["Attempted to access Context.eventsDatabase before it was set. This may cause unexpected behaviour."],r.G.Trace),a.instance.eventsDatabase}static set eventsDatabase(e){a.instance.eventsDatabase=e}static get pingsDatabase(){return void 0===a.instance.pingsDatabase&&(0,r.Z)(i,["Attempted to access Context.pingsDatabase before it was set. This may cause unexpected behaviour."],r.G.Trace),a.instance.pingsDatabase}static set pingsDatabase(e){a.instance.pingsDatabase=e}static get errorManager(){return void 0===a.instance.errorManager&&(0,r.Z)(i,["Attempted to access Context.errorManager before it was set. This may cause unexpected behaviour."],r.G.Trace),a.instance.errorManager}static set errorManager(e){a.instance.errorManager=e}static get applicationId(){return void 0===a.instance.applicationId&&(0,r.Z)(i,["Attempted to access Context.applicationId before it was set. This may cause unexpected behaviour."],r.G.Trace),a.instance.applicationId}static set applicationId(e){a.instance.applicationId=e}static get initialized(){return a.instance.initialized}static set initialized(e){a.instance.initialized=e}static get config(){return void 0===a.instance.config&&(0,r.Z)(i,["Attempted to access Context.config before it was set. This may cause unexpected behaviour."],r.G.Trace),a.instance.config}static set config(e){a.instance.config=e}static get startTime(){return a.instance.startTime}static get testing(){return a.instance.testing}static set testing(e){a.instance.testing=e}static get corePings(){return a.instance.corePings}static set corePings(e){a.instance.corePings=e}static get coreMetrics(){return a.instance.coreMetrics}static set coreMetrics(e){a.instance.coreMetrics=e}static set platform(e){a.instance.platform=e}static get platform(){return void 0===a.instance.platform&&(0,r.Z)(i,["Attempted to access Context.platform before it was set. This may cause unexpected behaviour."],r.G.Trace),a.instance.platform}static isPlatformSet(){return!!a.instance.platform}static getSupportedMetric(e){return a.instance.supportedMetrics[e]}static addSupportedMetric(e,t){e in a.instance.supportedMetrics||(a.instance.supportedMetrics[e]=t)}}},26312:function(e,t,n){var r,i;n.d(t,{N:function(){return r}}),(i=r||(r={})).InvalidValue="invalid_value",i.InvalidLabel="invalid_label",i.InvalidState="invalid_state",i.InvalidOverflow="invalid_overflow",i.InvalidType="invalid_type"},4547:function(e,t,n){var r,i;function a(e,t,n=r.Debug){let i=`(Glean.${e})`;Array.isArray(t)?console[n](i,...t):console[n](i,t)}n.d(t,{G:function(){return r},Z:function(){return a}}),(i=r||(r={})).Debug="debug",i.Info="info",i.Warn="warn",i.Error="error",i.Trace="trace"},49801:function(e,t,n){n.d(t,{K:function(){return o}});var r=n(99371),i=n(63436),a=n(93448),s=n(26147);class o extends a.jb{constructor(e){super(e)}static withTransformedExtras(e,t){let n=t(e.extra||{});return{category:e.category,name:e.name,timestamp:e.timestamp,extra:n&&Object.keys(n).length>0?n:void 0}}addExtra(e,t){this.inner.extra||(this.inner.extra={}),this.inner.extra[e]=t}withoutReservedExtras(){return o.withTransformedExtras(this.get(),e=>Object.keys(e).filter(e=>!r.yb.includes(e)).reduce((t,n)=>(t[n]=e[n],t),{}))}validate(e){if(!(0,i.Kn)(e))return{type:a.XQ.Error,errorMessage:`Expected Glean event object, got ${typeof e}`};let t="category"in e&&(0,i.HD)(e.category),n="name"in e&&(0,i.HD)(e.name);if(!t||!n)return{type:a.XQ.Error,errorMessage:`Unexpected value for "category" or "name" in event object: ${JSON.stringify(e)}`};if(!("timestamp"in e&&(0,i.U)(e.timestamp)&&e.timestamp>=0))return{type:a.XQ.Error,errorMessage:`Event timestamp must be a positive integer, got ${JSON.stringify(e)}`};if(e.extra){if(!(0,i.Kn)(e.extra))return{type:a.XQ.Error,errorMessage:`Expected Glean extras object, got ${typeof e}`};for(let[t,n]of Object.entries(e.extra)){let e=(0,s.Cp)(t);if(e.type===a.XQ.Error)return e;if(!(0,i.HD)(n)&&!(0,i.hj)(n)&&!(0,i.jn)(n))return{type:a.XQ.Error,errorMessage:`Unexpected value for extra key ${t}: ${JSON.stringify(n)}`}}}return{type:a.XQ.Success}}payload(){return o.withTransformedExtras(this.withoutReservedExtras(),e=>Object.keys(e).reduce((t,n)=>(t[n]=e[n].toString(),t),{}))}}},49159:function(e,t,n){n.d(t,{t:function(){return s}});var r=n(8921),i=n(63436),a=n(75747);class s{constructor(e,t,n){n&&r._.addSupportedMetric(e,n),this.type=e,this.name=t.name,this.category=t.category,this.sendInPings=t.sendInPings,this.lifetime=t.lifetime,this.disabled=t.disabled,this.dynamicLabel=t.dynamicLabel}baseIdentifier(){return this.category.length>0?`${this.category}.${this.name}`:this.name}identifier(){let e=this.baseIdentifier();return(0,i.o8)(this.dynamicLabel)?e:(0,a.qd)(this)}shouldRecord(e){return e&&!this.disabled}testGetNumRecordedErrors(e,t=this.sendInPings[0]){return(0,i.sJ)("testGetNumRecordedErrors")?r._.errorManager.testGetNumRecordedErrors(this,e,t):0}}},93448:function(e,t,n){n.d(t,{Cn:function(){return o},XQ:function(){return i},jb:function(){return l}});var r,i,a=n(8921),s=n(26312);(r=i||(i={}))[r.Success=0]="Success",r[r.Error=1]="Error";class o extends Error{constructor(e,t=s.N.InvalidType){super(e),this.type=t,this.name="MetricValidationError"}recordError(e){a._.errorManager.record(e,this.type,this.message)}}class l{constructor(e){this.inner=this.validateOrThrow(e)}get(){return this.inner}set(e){this.inner=e}validateOrThrow(e){let t=this.validate(e);if(t.type===i.Error)throw new o(t.errorMessage,t.errorType);return e}}},8219:function(e,t,n){n.d(t,{Z:function(){return f},_:function(){return g}});var r,i=n(49801),a=n(49159),s=n(63436),o=n(8921),l=n(26312),c=n(93448),u=function(e,t,n,r,i){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},d=function(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class g extends a.t{constructor(e,t){super("event",e),this.allowedExtraKeys=t}record(e,t=(0,s.ts)()){if(!this.shouldRecord(o._.uploadEnabled))return;let n=Date.now();try{let r=new i.K({category:this.category,name:this.name,timestamp:t,extra:e}),a={};if(e&&this.allowedExtraKeys)for(let[t,n]of Object.entries(e))if(this.allowedExtraKeys.includes(t))(0,s.HD)(n)?a[t]=(0,s.HE)(this,n,500):a[t]=n;else{o._.errorManager.record(this,l.N.InvalidValue,`Invalid key index: ${t}`);continue}a.glean_timestamp=n.toString(),r.set({...r.get(),extra:a}),o._.eventsDatabase.record(this,r)}catch(e){e instanceof c.Cn&&e.recordError(this)}}testGetValue(e=this.sendInPings[0]){if((0,s.sJ)("testGetValue","core.metrics.EventMetricType")){let t=o._.eventsDatabase.getEvents(e,this);return t&&t.forEach(e=>{e.extra&&(delete e.extra.glean_timestamp,0==Object.keys(e.extra).length&&(e.extra=void 0))}),t}}}class f{constructor(e,t){r.set(this,void 0),u(this,r,new g(e,t),"f")}record(e){d(this,r,"f").record(e)}testGetValue(e=d(this,r,"f").sendInPings[0]){return d(this,r,"f").testGetValue(e)}testGetNumRecordedErrors(e,t=d(this,r,"f").sendInPings[0]){return d(this,r,"f").testGetNumRecordedErrors(e,t)}}r=new WeakMap},75747:function(e,t,n){n.d(t,{Dc:function(){return s},ho:function(){return c},lb:function(){return l},qd:function(){return u}});var r=n(93448),i=n(8921),a=n(26312);class s extends r.jb{constructor(e){super(e)}validate(e){return{type:r.XQ.Success}}payload(){return this.inner}}let o=/^[a-z_][a-z0-9_-]{0,29}(\.[a-z_][a-z0-9_-]{0,29})*$/;function l(e,t){return`${e}/${t}`}function c(e){return e.split("/")[0]}function u(e){if(void 0===e.dynamicLabel)throw Error("This point should never be reached.");let t=l(e.baseIdentifier(),e.dynamicLabel);for(let n of e.sendInPings)if(i._.metricsDatabase.hasMetric(e.lifetime,n,e.type,t))return t;let n=0;for(let t of e.sendInPings)n+=i._.metricsDatabase.countByBaseIdentifier(e.lifetime,t,e.type,e.baseIdentifier());let r=!1;return n>=16?r=!0:e.dynamicLabel.length>61?(r=!0,i._.errorManager.record(e,a.N.InvalidLabel,`Label length ${e.dynamicLabel.length} exceeds maximum of 61.`)):o.test(e.dynamicLabel)||(r=!0,i._.errorManager.record(e,a.N.InvalidLabel,`Label must be snake_case, got '${e.dynamicLabel}'.`)),r?l(e.baseIdentifier(),"__other__"):t}},45567:function(e,t,n){n.d(t,{y0:function(){return g}});var r,i=n(8921),a=n(49159),s=n(93448),o=n(26147),l=n(63436),c=function(e,t,n,r,i){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},u=function(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class d extends s.jb{constructor(e){super(e)}validate(e){return(0,o.Cp)(e)}payload(){return this.inner}}class g extends a.t{constructor(e){super("string",e,d)}set(e){if(this.shouldRecord(i._.uploadEnabled))try{let t=(0,l.HE)(this,e,100),n=new d(t);i._.metricsDatabase.record(this,n)}catch(e){e instanceof s.Cn&&e.recordError(this)}}testGetValue(e=this.sendInPings[0]){if((0,l.sJ)("testGetValue","core.metrics.StringMetricType"))return i._.metricsDatabase.getMetric(e,this)}}t.ZP=class{constructor(e){r.set(this,void 0),c(this,r,new g(e),"f")}set(e){u(this,r,"f").set(e)}testGetValue(e=u(this,r,"f").sendInPings[0]){return u(this,r,"f").testGetValue(e)}testGetNumRecordedErrors(e,t=u(this,r,"f").sendInPings[0]){return u(this,r,"f").testGetNumRecordedErrors(e,t)}},r=new WeakMap},26147:function(e,t,n){n.d(t,{Cp:function(){return g},Lg:function(){return c},Rj:function(){return d},g:function(){return u}});var r=n(93448),i=n(63436),a=n(75747),s=n(8921),o=n(26312),l=n(4547);function c(e,t){e.startsWith("labeled_")&&s._.addSupportedMetric(e,a.Dc);let n=s._.getSupportedMetric(e);if(!n)throw Error(`Unable to create metric of unknown type "${e}".`);return new n(t)}function u(e,t){try{return c(e,t),!0}catch(e){return(0,l.Z)("Glean.core.Metrics.utils",e.message,l.G.Error),!1}}function d(e,t=!0){return(0,i.U)(e)?(t?e<0:e<=0)?{type:r.XQ.Error,errorMessage:`Expected positive value, got ${JSON.stringify(e)}`,errorType:o.N.InvalidValue}:{type:r.XQ.Success}:{type:r.XQ.Error,errorMessage:`Expected integer value, got ${JSON.stringify(e)}`}}function g(e){return(0,i.HD)(e)?{type:r.XQ.Success}:{type:r.XQ.Error,errorMessage:`Expected string value, got ${JSON.stringify(e)}`}}},63436:function(e,t,n){let r;n.d(t,{pJ:function(){return v},Ln:function(){return S},ts:function(){return E},jn:function(){return p},U:function(){return b},qT:function(){return function e(t){if(h(t)||p(t)||m(t))return!0;if(g(t)){if(0===Object.keys(t).length)return!0;for(let n in t)return e(t[n])}return!!Array.isArray(t)&&t.every(t=>e(t))}},hj:function(){return m},Kn:function(){return g},HD:function(){return h},o8:function(){return f},hU:function(){return T},hL:function(){return y},YL:function(){return x},sJ:function(){return D},HE:function(){return I},AK:function(){return _},r4:function(){return w}});var i={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let a=new Uint8Array(16),s=[];for(let e=0;e<256;++e)s.push((e+256).toString(16).slice(1));var o=function(e,t,n){if(i.randomUUID&&!t&&!e)return i.randomUUID();let o=(e=e||{}).random||(e.rng||function(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(a)})();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=o[e];return t}return function(e,t=0){return s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]}(o)},l=n(8921),c=n(26312),u=n(4547),d=n(93448);function g(e){return"object"==typeof e&&null!==e&&e.constructor===Object}function f(e){return void 0===e}function h(e){return"string"==typeof e}function p(e){return"boolean"==typeof e}function m(e){return"number"==typeof e&&!isNaN(e)}function b(e){return m(e)&&Number.isInteger(e)}function v(e){return"true"===e.toLowerCase()||"false"!==e.toLowerCase()&&void 0}function y(e){return e.replace(/[^a-z0-9]+/gi,"-").toLowerCase()}function w(e){return/^(http|https):\/\/[a-zA-Z0-9._-]+(:\d+){0,1}(\/{0,1})$/i.test(e)}function _(e){return/^[a-z0-9-]{1,20}$/i.test(e)}function S(){return"undefined"!=typeof crypto?o():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}function E(){return Math.round("undefined"==typeof performance?Date.now():performance.now())}function I(e,t,n){if(!h(t))throw new d.Cn(`Expected string, got ${JSON.stringify(t)}`);let r=new TextEncoder,i=new TextDecoder("utf-8"),a=r.encode(t).slice(0,n),s=i.decode(a);return s!==t&&l._.errorManager.record(e,c.N.InvalidOverflow,`Value length ${new Blob([t]).size} exceeds maximum of ${t.length} bytes.`),s}function D(e,t="core.utils"){return!!l._.testing||((0,u.Z)(t,[`Attempted to access test only method \`${e||"unknown"}\`,`,"but Glean is not in testing mode. Ignoring. Make sure to put Glean in testing mode","before accessing such methods, by calling `testResetGlean`."],u.G.Error),!1)}function x(...e){let t=e.reduce((e,t)=>e+t,0);return t>Number.MAX_SAFE_INTEGER&&(t=Number.MAX_SAFE_INTEGER),t}function T(){return"undefined"==typeof window}n(25566)},40864:function(e,t,n){let r;n.d(t,{ZP:function(){return tS}});var i,a,s,o,l,c,u,d,g,f,h,p,m,b=n(4547);(i=c||(c={}))[i.RecoverableFailure=0]="RecoverableFailure",i[i.UnrecoverableFailure=1]="UnrecoverableFailure",i[i.Success=2]="Success";class v{constructor(e,t){this.result=e,this.status=t}}class y{}var w=y;let _="platform.browser.FetchUploader";class S extends w{constructor(){super(...arguments),this.timeoutMs=1e4}async post(e,t,n=!0){let r;let i=new AbortController,a=setTimeout(()=>i.abort(),this.timeoutMs),s=t.asCompressedPayload();try{r=await fetch(e.toString(),{headers:s.headers,method:"POST",body:s.payload,keepalive:n,credentials:"omit",signal:i.signal,redirect:"error"})}catch(t){if(t instanceof DOMException)(0,b.Z)(_,["Timeout while attempting to upload ping.\n",t],b.G.Error);else if(t instanceof TypeError){if(n)return this.post(e,s,!1);(0,b.Z)(_,["Network error while attempting to upload ping.\n",t],b.G.Error)}else(0,b.Z)(_,["Unknown error while attempting to upload ping.\n",t],b.G.Error);return clearTimeout(a),new v(0)}return clearTimeout(a),new v(2,r.status)}supportsCustomHeaders(){return!0}}var E=new S;class I extends w{constructor(){super(...arguments),this.timeoutMs=1e4}async post(e,t,n=!0){return navigator.sendBeacon(e,t.payload)?new v(2,200):(n&&(0,b.Z)("platform.browser.SendBeaconUploader","The `sendBeacon` call was not serviced by the browser. Deleting data.",b.G.Error),new v(1))}supportsCustomHeaders(){return!1}}var D=new I,x=n(8921);let T="platform.browser.SendBeaconFallbackUploader";class P extends w{constructor(){super(...arguments),this.fetchUploader=E,this.sendBeaconUploader=D}async post(e,t){var n,r;if(!(null===(n=x._.config)||void 0===n?void 0:n.sourceTags)&&!(null===(r=x._.config)||void 0===r?void 0:r.debugViewTag)&&navigator&&navigator.sendBeacon){let n=await this.sendBeaconUploader.post(e,t,!1);if(2==n.result)return n;(0,b.Z)(T,"The `sendBeacon` call was not serviced by the browser. Falling back to the `fetch` uploader.",b.G.Warn)}else(0,b.Z)(T,"`sendBeacon` is not available. Falling back to the `fetch` uploader.",b.G.Warn);return this.fetchUploader.post(e,t)}supportsCustomHeaders(){return!1}}var M=new P,$=n(63436);let G="platform.web.Storage";class U{constructor(e){this.rootKey=e,this.logTag=`${G}.${e}`}get(e=[]){let t;if(!(0,$.hU)()){try{let n=localStorage.getItem(this.rootKey)||"{}",r=JSON.parse(n);t=e.length>0?function(e,t){if(0===t.length)throw Error("The index must contain at least one property to get.");let n=e;for(let e of t){if(!(0,$.Kn)(n)||!(e in n))return;{let t=n[e];(0,$.qT)(t)&&(n=t)}}return n}(r,e):0===Object.keys(r).length?void 0:r}catch(e){(0,b.Z)(G,["Unable to fetch value from local storage.",e],b.G.Error)}return this.shouldUpdateSession(e)&&x._.coreMetrics.updateSessionInfo(),t}}update(e,t){if(!(0,$.hU)()){try{let n=localStorage.getItem(this.rootKey)||"{}",r=JSON.parse(n),i=function(e,t,n){if(0===t.length)throw Error("The index must contain at least one property to update.");let r={...e},i=r;for(let e of t.slice(0,t.length-1))(0,$.Kn)(i[e])||(i[e]={}),i=i[e];let a=t[t.length-1],s=n(i[a]);return i[a]=s,r}(r,e,t);localStorage.setItem(this.rootKey,JSON.stringify(i))}catch(e){(0,b.Z)(G,["Unable to update value from local storage.",e],b.G.Error)}this.shouldUpdateSession(e)&&x._.coreMetrics.updateSessionInfo()}}delete(e){if(!(0,$.hU)()){try{let t=localStorage.getItem(this.rootKey)||"{}",n=JSON.parse(t);if(0===e.length)localStorage.removeItem(this.rootKey);else try{let t=function(e,t){if(0===t.length)return{};let n={...e},r=n;for(let e of t.slice(0,t.length-1)){let n=r[e];if((0,$.Kn)(n))r=n;else throw Error(`Attempted to delete an entry from an inexistent index: ${JSON.stringify(t)}.`)}let i=t[t.length-1];return delete r[i],n}(n,e);localStorage.setItem(this.rootKey,JSON.stringify(t))}catch(t){(0,b.Z)(this.logTag,[`Error attempting to delete key ${e.toString()} from storage. Ignoring.`,t],b.G.Warn)}}catch(e){(0,b.Z)(G,["Unable to delete value from storage.",e],b.G.Error)}this.shouldUpdateSession(e)&&x._.coreMetrics.updateSessionInfo()}}shouldUpdateSession(e){return!e.includes("session_id")&&!e.includes("session_count")}}var C=n(99371);let k="core.Config";class A{constructor(e){var t;if(this.channel=null==e?void 0:e.channel,this.appBuild=null==e?void 0:e.appBuild,this.appDisplayVersion=null==e?void 0:e.appDisplayVersion,this.buildDate=null==e?void 0:e.buildDate,this.maxEvents=(null==e?void 0:e.maxEvents)||1,this.enableAutoPageLoadEvents=null==e?void 0:e.enableAutoPageLoadEvents,this.enableAutoElementClickEvents=null==e?void 0:e.enableAutoElementClickEvents,this.experimentationId=null==e?void 0:e.experimentationId,this.sessionLengthInMinutesOverride=null==e?void 0:e.sessionLengthInMinutesOverride,this.debug={},(null==e?void 0:e.serverEndpoint)&&!(0,$.r4)(e.serverEndpoint))throw Error(`Unable to initialize Glean, serverEndpoint ${e.serverEndpoint} is an invalid URL.`);if(!x._.testing&&(null===(t=null==e?void 0:e.serverEndpoint)||void 0===t?void 0:t.startsWith("http:")))throw Error(`Unable to initialize Glean, serverEndpoint ${e.serverEndpoint} must use the HTTPS protocol.`);this.serverEndpoint=e&&e.serverEndpoint?e.serverEndpoint:C.ey,this.httpClient=null==e?void 0:e.httpClient}get logPings(){return this.debug.logPings||!1}set logPings(e){this.debug.logPings=e}get debugViewTag(){return this.debug.debugViewTag}set debugViewTag(e){if(!(0,$.AK)(e||"")){(0,b.Z)(k,[`"${e||""}" is not a valid \`debugViewTag\` value.`,"Please make sure the value passed satisfies the regex `^[a-zA-Z0-9-]{1,20}$`."],b.G.Error);return}this.debug.debugViewTag=e}get sourceTags(){return this.debug.sourceTags}set sourceTags(e){if(!e||e.length<1||e.length>C.og){(0,b.Z)(k,`A list of tags cannot contain more than ${C.og} elements or less than one.`,b.G.Error);return}for(let t of e){if(t.startsWith("glean")){(0,b.Z)(k,"Tags starting with `glean` are reserved and must not be used.",b.G.Error);return}if(!(0,$.AK)(t))return}this.debug.sourceTags=e}}var O={},N=Uint8Array,L=Uint16Array,z=Int32Array,V=new N([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Z=new N([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),R=new N([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),j=function(e,t){for(var n=new L(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new z(n[30]),r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return{b:n,r:i}},B=j(V,2),W=B.b,J=B.r;W[28]=258,J[258]=28;for(var F=j(Z,0),K=F.b,q=F.r,X=new L(32768),Q=0;Q<32768;++Q){var H=(43690&Q)>>1|(21845&Q)<<1;H=(61680&(H=(52428&H)>>2|(13107&H)<<2))>>4|(3855&H)<<4,X[Q]=((65280&H)>>8|(255&H)<<8)>>1}for(var Y=function(e,t,n){for(var r,i=e.length,a=0,s=new L(t);a<i;++a)e[a]&&++s[e[a]-1];var o=new L(t);for(a=1;a<t;++a)o[a]=o[a-1]+s[a-1]<<1;if(n){r=new L(1<<t);var l=15-t;for(a=0;a<i;++a)if(e[a])for(var c=a<<4|e[a],u=t-e[a],d=o[e[a]-1]++<<u,g=d|(1<<u)-1;d<=g;++d)r[X[d]>>l]=c}else for(a=0,r=new L(i);a<i;++a)e[a]&&(r[a]=X[o[e[a]-1]++]>>15-e[a]);return r},ee=new N(288),Q=0;Q<144;++Q)ee[Q]=8;for(var Q=144;Q<256;++Q)ee[Q]=9;for(var Q=256;Q<280;++Q)ee[Q]=7;for(var Q=280;Q<288;++Q)ee[Q]=8;for(var et=new N(32),Q=0;Q<32;++Q)et[Q]=5;var en=Y(ee,9,0),er=Y(et,5,0),ei=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},ea=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},es=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},eo=function(e){return(e+7)/8|0},el=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new N(e.subarray(t,n))},ec=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],eu=function(e,t,n){var r=Error(t||ec[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,eu),!n)throw r;return r},ed=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},eg=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},ef=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,a=n.slice();if(!i)return{t:ew,l:0};if(1==i){var s=new N(n[0].s+1);return s[n[0].s]=1,{t:s,l:1}}n.sort(function(e,t){return e.f-t.f}),n.push({s:-1,f:25001});var o=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=i-1;)o=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:o.f+l.f,l:o,r:l};for(var g=a[0].s,r=1;r<i;++r)a[r].s>g&&(g=a[r].s);var f=new L(g+1),h=eh(n[u-1],f,0);if(h>t){var r=0,p=0,m=h-t,b=1<<m;for(a.sort(function(e,t){return f[t.s]-f[e.s]||e.f-t.f});r<i;++r){var v=a[r].s;if(f[v]>t)p+=b-(1<<h-f[v]),f[v]=t;else break}for(p>>=m;p>0;){var y=a[r].s;f[y]<t?p-=1<<t-f[y]++-1:++r}for(;r>=0&&p;--r){var w=a[r].s;f[w]==t&&(--f[w],++p)}h=t}return{t:new N(f),l:h}},eh=function(e,t,n){return -1==e.s?Math.max(eh(e.l,t,n+1),eh(e.r,t,n+1)):t[e.s]=n},ep=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new L(++t),r=0,i=e[0],a=1,s=function(e){n[r++]=e},o=1;o<=t;++o)if(e[o]==i&&o!=t)++a;else{if(!i&&a>2){for(;a>138;a-=138)s(32754);a>2&&(s(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(s(i),--a;a>6;a-=6)s(8304);a>2&&(s(a-3<<5|8208),a=0)}for(;a--;)s(i);a=1,i=e[o]}return{c:n.subarray(0,r),n:t}},em=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},eb=function(e,t,n){var r=n.length,i=eo(t+2);e[i]=255&r,e[i+1]=r>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var a=0;a<r;++a)e[i+a+4]=n[a];return(i+4+r)*8},ev=function(e,t,n,r,i,a,s,o,l,c,u){ed(t,u++,n),++i[256];for(var d,g,f,h,p=ef(i,15),m=p.t,b=p.l,v=ef(a,15),y=v.t,w=v.l,_=ep(m),S=_.c,E=_.n,I=ep(y),D=I.c,x=I.n,T=new L(19),P=0;P<S.length;++P)++T[31&S[P]];for(var P=0;P<D.length;++P)++T[31&D[P]];for(var M=ef(T,7),$=M.t,G=M.l,U=19;U>4&&!$[R[U-1]];--U);var C=c+5<<3,k=em(i,ee)+em(a,et)+s,A=em(i,m)+em(a,y)+s+14+3*U+em(T,$)+2*T[16]+3*T[17]+7*T[18];if(l>=0&&C<=k&&C<=A)return eb(t,u,e.subarray(l,l+c));if(ed(t,u,1+(A<k)),u+=2,A<k){d=Y(m,b,0),g=m,f=Y(y,w,0),h=y;var O=Y($,G,0);ed(t,u,E-257),ed(t,u+5,x-1),ed(t,u+10,U-4),u+=14;for(var P=0;P<U;++P)ed(t,u+3*P,$[R[P]]);u+=3*U;for(var N=[S,D],z=0;z<2;++z)for(var j=N[z],P=0;P<j.length;++P){var B=31&j[P];ed(t,u,O[B]),u+=$[B],B>15&&(ed(t,u,j[P]>>5&127),u+=j[P]>>12)}}else d=en,g=ee,f=er,h=et;for(var P=0;P<o;++P){var W=r[P];if(W>255){var B=W>>18&31;eg(t,u,d[B+257]),u+=g[B+257],B>7&&(ed(t,u,W>>23&31),u+=V[B]);var J=31&W;eg(t,u,f[J]),u+=h[J],J>3&&(eg(t,u,W>>5&8191),u+=Z[J])}else eg(t,u,d[W]),u+=g[W]}return eg(t,u,d[256]),u+g[256]},ey=new z([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),ew=new N(0),e_=function(e,t,n,r,i,a){var s=a.z||e.length,o=new N(r+s+5*(1+Math.ceil(s/7e3))+i),l=o.subarray(r,o.length-i),c=a.l,u=7&(a.r||0);if(t){u&&(l[0]=a.r>>3);for(var d=ey[t-1],g=d>>13,f=8191&d,h=(1<<n)-1,p=a.p||new L(32768),m=a.h||new L(h+1),b=Math.ceil(n/3),v=2*b,y=function(t){return(e[t]^e[t+1]<<b^e[t+2]<<v)&h},w=new z(25e3),_=new L(288),S=new L(32),E=0,I=0,D=a.i||0,x=0,T=a.w||0,P=0;D+2<s;++D){var M=y(D),$=32767&D,G=m[M];if(p[$]=G,m[M]=$,T<=D){var U=s-D;if((E>7e3||x>24576)&&(U>423||!c)){u=ev(e,l,0,w,_,S,I,x,P,D-P,u),x=E=I=0,P=D;for(var C=0;C<286;++C)_[C]=0;for(var C=0;C<30;++C)S[C]=0}var k=2,A=0,O=f,R=$-G&32767;if(U>2&&M==y(D-R))for(var j=Math.min(g,U)-1,B=Math.min(32767,D),W=Math.min(258,U);R<=B&&--O&&$!=G;){if(e[D+k]==e[D+k-R]){for(var F=0;F<W&&e[D+F]==e[D+F-R];++F);if(F>k){if(k=F,A=R,F>j)break;for(var K=Math.min(R,F-2),X=0,C=0;C<K;++C){var Q=D-R+C&32767,H=p[Q],Y=Q-H&32767;Y>X&&(X=Y,G=Q)}}}G=p[$=G],R+=$-G&32767}if(A){w[x++]=268435456|J[k]<<18|q[A];var ee=31&J[k],et=31&q[A];I+=V[ee]+Z[et],++_[257+ee],++S[et],T=D+k,++E}else w[x++]=e[D],++_[e[D]]}}for(D=Math.max(D,T);D<s;++D)w[x++]=e[D],++_[e[D]];u=ev(e,l,c,w,_,S,I,x,P,D-P,u),c||(a.r=7&u|l[u/8|0]<<3,u-=7,a.h=m,a.p=p,a.i=D,a.w=T)}else{for(var D=a.w||0;D<s+c;D+=65535){var en=D+65535;en>=s&&(l[u/8|0]=c,en=s),u=eb(l,u+1,e.subarray(D,en))}a.i=s}return el(o,0,r+eo(u)+i)},eS=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(1&n&&-306674912)^n>>>1;e[t]=n}return e}(),eE=function(){var e=-1;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=eS[255&n^t[r]]^n>>>8;e=n},d:function(){return~e}}},eI=function(e,t,n,r,i){if(!i&&(i={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),s=new N(a.length+e.length);s.set(a),s.set(e,a.length),e=s,i.w=a.length}return e_(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,i)},eD=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},ex=function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&eD(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var r=0;r<=n.length;++r)e[r+10]=n.charCodeAt(r)}},eT="undefined"!=typeof TextEncoder&&new TextEncoder,eP="undefined"!=typeof TextDecoder&&new TextDecoder;try{eP.decode(ew,{stream:!0})}catch(e){}function eM(e,t){if(t){for(var n=new N(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}if(eT)return eT.encode(e);for(var i=e.length,a=new N(e.length+(e.length>>1)),s=0,o=function(e){a[s++]=e},r=0;r<i;++r){if(s+5>a.length){var l=new N(s+8+(i-r<<1));l.set(a),a=l}var c=e.charCodeAt(r);c<128||t?o(c):(c<2048?o(192|c>>6):(c>55295&&c<57344?(o(240|(c=65536+(1047552&c)|1023&e.charCodeAt(++r))>>18),o(128|c>>12&63)):o(224|c>>12),o(128|c>>6&63)),o(128|63&c))}return el(a,0,s)}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;let e$="core.Pings.Database";class eG{constructor(){this.store=new x._.platform.Storage("pings")}attachObserver(e){this.observer=e}recordPing(e,t,n,r){let i={collectionDate:new Date().toISOString(),path:e,payload:n};r&&(i.headers=r),this.store.update([t],()=>i),this.observer&&this.observer.update(t,i)}deletePing(e){this.store.delete([e])}getAllPings(){let e=this.store.get(),t={};if((0,$.Kn)(e))for(let n in e){let r=e[n];!function(e){if((0,$.Kn)(e)){let t="collectionDate"in e&&(0,$.HD)(e.collectionDate)&&(0,$.hj)(new Date(e.collectionDate).getTime()),n="path"in e&&(0,$.HD)(e.path),r="payload"in e&&(0,$.qT)(e.payload)&&(0,$.Kn)(e.payload),i=!("headers"in e)||(0,$.qT)(e.headers)&&(0,$.Kn)(e.headers);return!!t&&!!n&&!!r&&!!i}return!1}(r)?((0,b.Z)(e$,`Unexpected data found in pings database: ${JSON.stringify(r,null,2)}. Deleting.`,b.G.Warn),this.store.delete([n])):t[n]=r}return Object.entries(t).sort(([e,{collectionDate:t}],[n,{collectionDate:r}])=>new Date(t).getTime()-new Date(r).getTime())}scanPendingPings(){if(this.observer)for(let[e,t]of this.getAllPingsWithoutSurplus())this.observer.update(e,t)}clearAll(){this.store.delete([])}getAllPingsWithoutSurplus(e=250,t=10485760){let n=this.getAllPings(),r=n.filter(([e,t])=>!eU(t)).reverse(),i=n.filter(([e,t])=>eU(t)),a=r.length;a>e&&(0,b.Z)(e$,[`More than ${e} pending pings in the pings database,`,`will delete ${a-e} old pings.`],b.G.Warn);let s=!1,o=0,l=0,c=[];for(let[n,i]of r)o++,l+=eM(JSON.stringify(i)).length,!s&&l>t&&((0,b.Z)(e$,[`Pending pings database has reached the size quota of ${t} bytes,`,"outstanding pings will be deleted."],b.G.Warn),s=!0),o>e&&(s=!0),s?this.deletePing(n):c.unshift([n,i]);return[...i,...c]}}function eU(e){return e.path.split("/")[3]===C.Ui}(a=u||(u={}))[a.Incrementing=0]="Incrementing",a[a.Throttled=1]="Throttled";class eC{constructor(e=6e4,t=40,n=0,r){this.interval=e,this.maxCount=t,this.count=n,this.started=r}get elapsed(){if((0,$.o8)(this.started))return NaN;let e=(0,$.ts)()-this.started;return e<0?NaN:e}reset(){this.started=(0,$.ts)(),this.count=0}shouldReset(){return!!((0,$.o8)(this.started)||isNaN(this.elapsed)||this.elapsed>this.interval)}getState(){this.shouldReset()&&this.reset();let e=this.interval-this.elapsed;return this.count>=this.maxCount?{state:1,remainingTime:e}:(this.count++,{state:0})}}class ek{constructor(e=3,t=3,n=1048576){this.maxWaitAttempts=e,this.maxRecoverableFailures=t,this.maxPingBodySize=n}}class eA extends Error{constructor(e){super(e),this.name="PingBodyOverflow"}}class eO{constructor(e,t,n,r){this.identifier=e,this.headers=t,this.payload=n,this.maxBodySize=r}asCompressedPayload(){let e;if("gzip"==this.headers["Content-Encoding"])return this;let t=eM(this.payload),n=this.headers;try{var r,i,a,s,o,l;r||(r={}),i=eE(),a=t.length,i.p(t),o=(s=eI(t,r,(l=r,10+(l.filename?l.filename.length+1:0)),8)).length,ex(s,r),eD(s,o-8,i.d()),eD(s,o-4,a),e=s,n["Content-Encoding"]="gzip",n["Content-Length"]=e.length.toString()}catch(e){return this}if(e.length>this.maxBodySize)throw new eA(`Body for ping ${this.identifier} exceeds ${this.maxBodySize} bytes. Discarding.`);return new eO(this.identifier,n,e,this.maxBodySize)}}let eN="core.Upload.PingUploadWorker";class eL{constructor(e,t,n=new ek){this.uploader=e,this.serverEndpoint=t,this.policy=n,this.isBlocking=!1}buildPingRequest(e){let t=e.headers||{};t={...e.headers,"Content-Type":"application/json; charset=utf-8",Date:new Date().toISOString(),"X-Telemetry-Agent":`Glean/${C.Q9} (JS on ${x._.platform.info.os()})`};let n=JSON.stringify(e.payload);if(n.length>this.policy.maxPingBodySize)throw new eA(`Body for ping ${e.identifier} exceeds ${this.policy.maxPingBodySize}bytes. Discarding.`);return t["Content-Length"]=n.length.toString(),new eO(e.identifier,t,n,this.policy.maxPingBodySize)}async attemptPingUpload(e){try{let t=this.buildPingRequest(e);return this.uploader.post(`${this.serverEndpoint}${e.path}`,t)}catch(e){return(0,b.Z)(eN,["Error trying to build or post ping request:",e],b.G.Warn),new v(1)}}work(e,t){for(;;)try{let n=e();switch(n.type){case"upload":if(this.isBlocking)return;this.attemptPingUpload(n.ping).then(e=>{t(n.ping,e)}).catch(e=>{console.log(e)});continue;case"done":return}}catch(e){(0,b.Z)(eN,["IMPOSSIBLE: Something went wrong while processing ping upload tasks.",e],b.G.Error)}}blockUploading(){this.isBlocking=!0}resumeUploading(){this.isBlocking=!1}}(s=d||(d={})).Done="done",s.Wait="wait",s.Upload="upload";var ez={done:()=>({type:"done"}),wait:e=>({type:"wait",remainingTime:e}),upload:e=>({type:"upload",ping:e})};let eV="core.Upload.PingUploadManager";class eZ{constructor(e,t,n=new ek,r=new eC){this.pingsDatabase=t,this.policy=n,this.rateLimiter=r,this.recoverableFailureCount=0,this.waitAttemptCount=0,this.queue=[],this.processing=new Set,this.worker=new eL(e.httpClient?e.httpClient:x._.platform.uploader,e.serverEndpoint,n),t.attachObserver(this)}getUploadTask(){let e=this.getUploadTaskInternal();return"wait"!==e.type&&this.waitAttemptCount>0&&(this.waitAttemptCount=0),"upload"!==e.type&&this.recoverableFailureCount>0&&(this.recoverableFailureCount=0),e}processPingUploadResponse(e,t){let{identifier:n}=e;this.processing.has(n)&&this.processing.delete(n);let{status:r,result:i}=t;if(r&&r>=200&&r<300){(0,b.Z)(eV,`Ping ${n} successfully sent ${r}.`,b.G.Info),this.pingsDatabase.deletePing(n);return}if(1===i||r&&r>=400&&r<500){(0,b.Z)(eV,`Unrecoverable upload failure while attempting to send ping ${n}. Error was: ${null!=r?r:"no status"}.`,b.G.Warn),this.pingsDatabase.deletePing(n);return}(0,b.Z)(eV,[`Recoverable upload failure while attempting to send ping ${n}, will retry.`,`Error was: ${null!=r?r:"no status"}.`],b.G.Warn),this.recoverableFailureCount++,this.enqueuePing(e)}clearPendingPingsQueue(){this.queue=this.queue.filter(e=>eU(e))}blockUploads(){this.worker.blockUploading()}resumeUploads(){this.worker.resumeUploading()}update(e,t){this.enqueuePing({identifier:e,...t}),this.worker.isBlocking||(this.processing.delete(e),this.pingsDatabase.deletePing(e)),this.worker.work(()=>this.getUploadTask(),(e,t)=>this.processPingUploadResponse(e,t))}enqueuePing(e){if(!this.processing.has(e.identifier)){for(let t of this.queue)if(t.identifier===e.identifier)return;this.queue.push(e)}}getUploadTaskInternal(){if(this.recoverableFailureCount>=this.policy.maxRecoverableFailures)return(0,b.Z)(eV,"Glean has reached maximum recoverable upload failures for the current uploading window.",b.G.Debug),ez.done();if(this.queue.length>0){let{state:e,remainingTime:t}=this.rateLimiter.getState();if(1===e)return((0,b.Z)(eV,["Glean is currently throttled.",`Pending pings may be uploaded in ${(t||0)/1e3}s.`],b.G.Debug),this.waitAttemptCount++,this.waitAttemptCount>this.policy.maxWaitAttempts)?ez.done():ez.wait(t||0);let n=this.queue.shift();return this.processing.add(n.identifier),ez.upload(n)}return ez.done()}}var eR=n(49159),ej=n(93448),eB=n(26312),eW=n(26147),eJ=function(e,t,n,r,i){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},eF=function(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};let eK=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;class eq extends ej.jb{constructor(e){super(e)}validate(e){let t=(0,eW.Cp)(e);return t.type===ej.XQ.Error?t:eK.test(e)?{type:ej.XQ.Success}:{type:ej.XQ.Error,errorMessage:`"${e}" is not a valid UUID`,errorType:eB.N.InvalidValue}}payload(){return this.inner}}class eX extends eR.t{constructor(e){super("uuid",e,eq)}set(e){let t;if(this.shouldRecord(x._.uploadEnabled)){e||(e=(0,$.Ln)());try{t=new eq(e),x._.metricsDatabase.record(this,t)}catch(e){e instanceof ej.Cn&&e.recordError(this)}}}generateAndSet(){if(!this.shouldRecord(x._.uploadEnabled))return;let e=(0,$.Ln)();return this.set(e),e}testGetValue(e=this.sendInPings[0]){if((0,$.sJ)("testGetValue","core.metrics.UUIDMetricType"))return x._.metricsDatabase.getMetric(e,this)}}var eQ=class{constructor(e){g.set(this,void 0),eJ(this,g,new eX(e),"f")}set(e){eF(this,g,"f").set(e)}generateAndSet(){return eF(this,g,"f").generateAndSet()}testGetValue(e=eF(this,g,"f").sendInPings[0]){return eF(this,g,"f").testGetValue(e)}testGetNumRecordedErrors(e,t=eF(this,g,"f").sendInPings[0]){return eF(this,g,"f").testGetNumRecordedErrors(e,t)}};g=new WeakMap,(o=f||(f={})).Nanosecond="nanosecond",o.Microsecond="microsecond",o.Millisecond="millisecond",o.Second="second",o.Minute="minute",o.Hour="hour",o.Day="day";var eH=f;class eY extends ej.jb{constructor(e){super(e)}static fromDate(e,t){if(!(e instanceof Date))throw new ej.Cn(`Expected Date object, got ${JSON.stringify(e)}`);return new eY({timeUnit:t,timezone:e.getTimezoneOffset(),date:e.toISOString()})}get date(){return new Date(this.inner.date)}get timezone(){return this.inner.timezone}get timeUnit(){return this.inner.timeUnit}get dateISOString(){return this.inner.date}validate(e){if(!(0,$.Kn)(e)||3!==Object.keys(e).length)return{type:ej.XQ.Error,errorMessage:`Expected Glean datetime metric object, got ${JSON.stringify(e)}`};let t="timeUnit"in e&&(0,$.HD)(e.timeUnit)&&Object.values(eH).includes(e.timeUnit),n="timezone"in e&&(0,$.hj)(e.timezone),r="date"in e&&(0,$.HD)(e.date)&&24===e.date.length&&!isNaN(Date.parse(e.date));return t&&n&&r?{type:ej.XQ.Success}:{type:ej.XQ.Error,errorMessage:`Invalid property on datetime metric, got ${JSON.stringify(e)}`}}payload(){let e=this.dateISOString.match(/\d+/g);if(!e||e.length<0)throw Error("IMPOSSIBLE: Unable to extract date information from DatetimeMetric.");let t=new Date(parseInt(e[0]),parseInt(e[1])-1,parseInt(e[2]),parseInt(e[3])-this.timezone/60,parseInt(e[4]),parseInt(e[5]),parseInt(e[6])),n=function(e){let t=-(e/60*1),n=Math.abs(t).toString().padStart(2,"0");return`${t>0?"+":"-"}${n}:00`}(this.timezone),r=t.getFullYear().toString().padStart(2,"0"),i=(t.getMonth()+1).toString().padStart(2,"0"),a=t.getDate().toString().padStart(2,"0");if(this.timeUnit===eH.Day)return`${r}-${i}-${a}${n}`;let s=t.getHours().toString().padStart(2,"0");if(this.timeUnit===eH.Hour)return`${r}-${i}-${a}T${s}${n}`;let o=t.getMinutes().toString().padStart(2,"0");if(this.timeUnit===eH.Minute)return`${r}-${i}-${a}T${s}:${o}${n}`;let l=t.getSeconds().toString().padStart(2,"0");if(this.timeUnit===eH.Second)return`${r}-${i}-${a}T${s}:${o}:${l}${n}`;let c=t.getMilliseconds().toString().padStart(3,"0");return this.timeUnit===eH.Millisecond?`${r}-${i}-${a}T${s}:${o}:${l}.${c}${n}`:this.timeUnit===eH.Microsecond?`${r}-${i}-${a}T${s}:${o}:${l}.${c}000${n}`:`${r}-${i}-${a}T${s}:${o}:${l}.${c}000000${n}`}}class e0 extends eR.t{constructor(e,t){super("datetime",e,eY),this.timeUnit=t}set(e){if(!this.shouldRecord(x._.uploadEnabled))return;let t=this.truncateDate(e);try{let e=eY.fromDate(t,this.timeUnit);x._.metricsDatabase.record(this,e)}catch(e){e instanceof ej.Cn&&e.recordError(this)}}truncateDate(e){e||(e=new Date);let t=e;switch(this.timeUnit){case eH.Day:t.setMilliseconds(0),t.setSeconds(0),t.setMinutes(0),t.setMilliseconds(0);case eH.Hour:t.setMilliseconds(0),t.setSeconds(0),t.setMinutes(0);case eH.Minute:t.setMilliseconds(0),t.setSeconds(0);case eH.Second:t.setMilliseconds(0)}return t}testGetValueAsDatetimeMetric(e,t){if((0,$.sJ)(t,"core.metrics.DatetimeMetricType")){let t=x._.metricsDatabase.getMetric(e,this);if(t)return new eY(t)}}testGetValueAsString(e=this.sendInPings[0]){let t=this.testGetValueAsDatetimeMetric(e,"testGetValueAsString");return t?t.payload():void 0}testGetValue(e=this.sendInPings[0]){let t=this.testGetValueAsDatetimeMetric(e,"testGetValue");return t?t.date:void 0}}new WeakMap;var e1=n(45567);let e2="core.metrics.CounterMetricType";class e3 extends ej.jb{constructor(e){super(e)}validate(e){return(0,eW.Rj)(e,!1)}payload(){return this.inner}saturatingAdd(e){let t=this.validateOrThrow(e);this.inner=(0,$.YL)(this.inner,t)}}class e8 extends eR.t{constructor(e){super("counter",e,e3)}add(e){if(this.shouldRecord(x._.uploadEnabled)){(0,$.o8)(e)&&(e=1);try{x._.metricsDatabase.transform(this,this.transformFn(e))}catch(e){e instanceof ej.Cn&&e.recordError(this)}}}transformFn(e){return t=>{let n=new e3(e);if(t)try{n.saturatingAdd(t)}catch(e){(0,b.Z)(e2,`Unexpected value found in storage for metric ${this.name}: ${JSON.stringify(t)}. Overwriting.`)}return n}}testGetValue(e=this.sendInPings[0]){if((0,$.sJ)("testGetValue",e2))return x._.metricsDatabase.getMetric(e,this)}}new WeakMap;class e4{constructor(){this.clientId=new eX({name:"client_id",category:"",sendInPings:["glean_client_info"],lifetime:"user",disabled:!1}),this.firstRunDate=new e0({name:"first_run_date",category:"",sendInPings:["glean_client_info"],lifetime:"user",disabled:!1},eH.Day),this.os=new e1.y0({name:"os",category:"",sendInPings:["glean_client_info"],lifetime:"application",disabled:!1}),this.osVersion=new e1.y0({name:"os_version",category:"",sendInPings:["glean_client_info"],lifetime:"application",disabled:!1}),this.architecture=new e1.y0({name:"architecture",category:"",sendInPings:["glean_client_info"],lifetime:"application",disabled:!1}),this.locale=new e1.y0({name:"locale",category:"",sendInPings:["glean_client_info"],lifetime:"application",disabled:!1}),this.appChannel=new e1.y0({name:"app_channel",category:"",sendInPings:["glean_client_info"],lifetime:"application",disabled:!1}),this.appBuild=new e1.y0({name:"app_build",category:"",sendInPings:["glean_client_info"],lifetime:"application",disabled:!1}),this.appDisplayVersion=new e1.y0({name:"app_display_version",category:"",sendInPings:["glean_client_info"],lifetime:"application",disabled:!1}),this.buildDate=new e0({name:"build_date",category:"",sendInPings:["glean_client_info"],lifetime:"application",disabled:!1},"second"),this.sessionId=new eX({name:"session_id",category:"",sendInPings:["glean_client_info"],lifetime:"user",disabled:!1}),this.sessionCount=new e8({name:"session_count",category:"",sendInPings:["glean_client_info"],lifetime:"user",disabled:!1})}initialize(){!(!x._.testing&&(0,$.hU)())&&(this.initializeClientId(),this.initializeFirstRunDate(),this.updateSessionInfo(),this.os.set(x._.platform.info.os()),this.osVersion.set(x._.platform.info.osVersion()),this.architecture.set(x._.platform.info.arch()),this.locale.set(x._.platform.info.locale()),this.appBuild.set(x._.config.appBuild||"Unknown"),this.appDisplayVersion.set(x._.config.appDisplayVersion||"Unknown"),x._.config.channel&&this.appChannel.set(x._.config.channel),x._.config.buildDate&&this.buildDate.set())}updateSessionInfo(){if(!(0,$.hU)()){if(x._.metricsDatabase.getMetric(C.xW,this.sessionId))try{(function(e=30){let t=new Date(Number(localStorage.getItem("glean_session_last_active"))),n=new Date;return n.setMinutes(n.getMinutes()-e),n>t})(x._.config.sessionLengthInMinutesOverride)&&this.generateNewSession()}catch(e){this.generateNewSession()}else this.generateNewSession();localStorage.setItem("glean_session_last_active",Date.now().toString())}}initializeClientId(){let e=!1,t=x._.metricsDatabase.getMetric(C.xW,this.clientId);if(t)try{(0,eW.Lg)("uuid",t).payload()===C.Ei&&(e=!0)}catch(t){(0,b.Z)("core.InternalMetrics","Unexpected value found for Glean clientId. Ignoring.",b.G.Warn),e=!0}else e=!0;e&&this.clientId.set((0,$.Ln)())}initializeFirstRunDate(){x._.metricsDatabase.getMetric(C.xW,this.firstRunDate)||this.firstRunDate.set()}generateNewSession(){this.sessionId.generateAndSet(),this.sessionCount.add()}}let e5="core.Pings.Maker";var e6=function(e,t,n){let r=function(e,t){let n=x._.eventsDatabase.getPingEvents(e.name,!0),r=x._.metricsDatabase.getPingMetrics(e.name,!0);if(!r&&!n){if(!e.sendIfEmpty){(0,b.Z)(e5,`Storage for ${e.name} empty. Bailing out.`,b.G.Info);return}(0,b.Z)(e5,`Storage for ${e.name} empty. Ping will still be sent.`,b.G.Info)}e.includeClientId&&x._.config.experimentationId&&(r=void 0!==r?{...r,string:{...(null==r?void 0:r.string)||void 0,"glean.client.annotation.experimentation_id":x._.config.experimentationId}}:{string:{"glean.client.annotation.experimentation_id":x._.config.experimentationId}});let i=r?{metrics:r}:{},a=function(e,t){let n=function(e){let t=new e8({category:"",name:`${e.name}#sequence`,sendInPings:[C.ni],lifetime:"user",disabled:!1}),n=x._.metricsDatabase.getMetric(C.ni,t);if(t.add(1),n)try{return new e3(n).payload()}catch(t){(0,b.Z)(e5,`Unexpected value found for sequence number in ping ${e.name}. Ignoring.`,b.G.Warn)}return 0}(e),{startTime:r,endTime:i}=function(e){let{startTimeMetric:t,startTime:n}=function(e){let t=new e0({category:"",name:`${e.name}#start`,sendInPings:[C.ni],lifetime:"user",disabled:!1},eH.Minute),n=x._.metricsDatabase.getMetric(C.ni,t);return{startTimeMetric:t,startTime:n?new eY(n):eY.fromDate(x._.startTime,eH.Minute)}}(e),r=new Date;t.set(r);let i=eY.fromDate(r,eH.Minute);return{startTime:n.payload(),endTime:i.payload()}}(e),a={seq:n,start_time:r,end_time:i};return t&&(a.reason=t),a}(e,t),s=function(e){let t=x._.metricsDatabase.getPingMetrics(C.xW,!0);t||((0,b.Z)(e5,"Empty client info data. Will submit anyways.",b.G.Warn),t={});let n={telemetry_sdk_build:C.Q9};for(let e in t)n={...n,...t[e]};return e.includeClientId||(delete n.client_id,delete n.session_id),n}(e);return{...i,...n?{events:n}:{},ping_info:a,client_info:s}}(t,n);if(!r)return;x._.config.logPings&&(0,b.Z)(e5,JSON.stringify(r,null,2),b.G.Info);let i=function(){let e={};if(x._.config.debugViewTag&&(e["X-Debug-ID"]=x._.config.debugViewTag),x._.config.sourceTags&&(e["X-Source-Tags"]=x._.config.sourceTags.toString()),Object.keys(e).length>0)return e}();x._.pingsDatabase.recordPing(`/submit/${x._.applicationId}/${t.name}/${C.Oo}/${e}`,e,r,i)};let e7="core.Pings.PingType";class e9{constructor(e){var t;this.name=e.name,this.includeClientId=e.includeClientId,this.sendIfEmpty=e.sendIfEmpty,this.reasonCodes=null!==(t=e.reasonCodes)&&void 0!==t?t:[],this.preciseTimestamps=e.preciseTimestamps}submit(e){this.testCallback?this.testCallback(e).then(()=>{this.internalSubmit(e,this.resolveTestPromiseFunction)}).catch(t=>{(0,b.Z)(e7,[`There was an error validating "${this.name}" (${null!=e?e:"no reason"}):`,t],b.G.Error),this.internalSubmit(e,this.rejectTestPromiseFunction)}):this.internalSubmit(e)}internalSubmit(e,t){if(!x._.initialized){(0,b.Z)(e7,"Glean must be initialized before submitting pings.",b.G.Info);return}if(!x._.uploadEnabled&&this.name!==C.Ui){(0,b.Z)(e7,"Glean disabled: not submitting pings. Glean may still submit the deletion-request ping.",b.G.Info);return}let n=e;e&&!this.reasonCodes.includes(e)&&((0,b.Z)(e7,`Invalid reason code ${e} from ${this.name}. Ignoring.`,b.G.Warn),n=void 0),e6((0,$.Ln)(),this,n),t&&(t(),this.resolveTestPromiseFunction=void 0,this.rejectTestPromiseFunction=void 0,this.testCallback=void 0)}async testBeforeNextSubmit(e){if((0,$.sJ)("testBeforeNextSubmit",e7)){if(this.testCallback){(0,b.Z)(e7,`There is an existing test call for ping "${this.name}". Ignoring.`,b.G.Error);return}return new Promise((t,n)=>{this.resolveTestPromiseFunction=t,this.rejectTestPromiseFunction=n,this.testCallback=e})}}}new WeakMap;class te{constructor(){this.deletionRequest=new e9({name:C.Ui,includeClientId:!0,sendIfEmpty:!0,reasonCodes:["at_init","set_upload_enabled"]}),this.events=new e9({name:C.E1,includeClientId:!0,sendIfEmpty:!1,reasonCodes:["startup","max_capacity"]})}}let tt="core.Metrics.Database",tn="reserved#",tr=`glean.${tn}`;class ti{constructor(){this.userStore=new x._.platform.Storage("userLifetimeMetrics"),this.pingStore=new x._.platform.Storage("pingLifetimeMetrics"),this.appStore=new x._.platform.Storage("appLifetimeMetrics")}record(e,t){this.transform(e,()=>t)}transform(e,t){if(e.disabled)return;let n=this.chooseStore(e.lifetime),r=e.identifier();for(let i of e.sendInPings){let a=e=>t(e).get();n.update([i,e.type,r],a)}}hasMetric(e,t,n,r){let i=this.chooseStore(e).get([t,n,r]);return!(0,$.o8)(i)}countByBaseIdentifier(e,t,n,r){let i=this.chooseStore(e).get([t,n]);return(0,$.o8)(i)?0:Object.keys(i).filter(e=>e.startsWith(r)).length}getMetric(e,t){let n=this.chooseStore(t.lifetime),r=t.identifier(),i=n.get([e,t.type,r]);if((0,$.o8)(i)||(0,eW.g)(t.type,i))return i;(0,b.Z)(tt,`Unexpected value found for metric ${r}: ${JSON.stringify(i)}. Clearing.`,b.G.Error),n.delete([e,t.type,r])}getPingMetrics(e,t){let n=this.getCorrectedPingData(e,"user"),r=this.getCorrectedPingData(e,"ping"),i=this.getCorrectedPingData(e,"application");t&&Object.keys(r).length>0&&this.clear("ping",e);let a={};for(let e of[n,r,i])for(let t in e)for(let n in e[t])n.startsWith(tr)||(n.includes("/")?this.processLabeledMetric(a,t,n,e[t][n]):a[t]={...a[t],[n]:e[t][n]});if(0!==Object.keys(a).length)return function(e){let t={};for(let n in e){let r=e[n];for(let e in t[n]={},r){let i=(0,eW.Lg)(n,r[e]);t[n][e]=i.payload()}}return t}(a)}clear(e,t){this.chooseStore(e).delete(t?[t]:[])}clearAll(){this.userStore.delete([]),this.pingStore.delete([]),this.appStore.delete([])}chooseStore(e){switch(e){case"user":return this.userStore;case"ping":return this.pingStore;case"application":return this.appStore}}getCorrectedPingData(e,t){let n=this.chooseStore(t),r=n.get([e]);if((0,$.o8)(r))return{};if(!(0,$.Kn)(r))return(0,b.Z)(tt,`Invalid value found in storage for ping "${e}". Deleting.`,b.G.Debug),n.delete([e]),{};let i={};for(let t in r){let a=r[t];if(!(0,$.Kn)(a)){(0,b.Z)(tt,`Unexpected data found in storage for metrics of type "${t}" in ping "${e}". Deleting.`,b.G.Debug),n.delete([e,t]);continue}for(let r in a){if(!(0,eW.g)(t,a[r])){(0,b.Z)(tt,`Invalid value "${JSON.stringify(a[r])}" found in storage for metric "${r}". Deleting.`,b.G.Debug),n.delete([e,t,r]);continue}i[t]||(i[t]={}),i[t][r]=a[r]}}return i}processLabeledMetric(e,t,n,r){let i=`labeled_${t}`,a=n.split("/",2),s=a[0],o=a[1];if(i in e&&s in e[i]){let t=e[i][s];e[i][s]={...t,[o]:r}}else e[i]={...e[i],[s]:{[o]:r}}}}var ta=n(8219),ts=n(49801);let to="core.Metric.EventsDatabase";function tl(e,t=x._.startTime){td(e).record({[C.M6]:t.toISOString()},0)}function tc(e){(0,$.HD)(e)||(e="");let t=new Date(e);if(isNaN(t.getTime()))throw Error(`Error attempting to generate Date object from string: ${e}`);return t}function tu(e){return new e8({category:"glean",name:`${tn}execution_counter`,sendInPings:e.filter(e=>e!==C.E1),lifetime:"ping",disabled:!1})}function td(e){return new ta._({category:"glean",name:"restarted",sendInPings:e.filter(e=>e!==C.E1),lifetime:"ping",disabled:!1},[C.M6])}class tg{constructor(){this.initialized=!1,this.eventsStore=new x._.platform.Storage("events")}initialize(){var e;if(this.initialized)return;let t=this.getAvailableStoreNames();if(t.includes(C.E1)){let t=null!==(e=this.eventsStore.get([C.E1]))&&void 0!==e?e:[];t.length>0&&t.length>=x._.config.maxEvents&&x._.corePings.events.submit("startup")}tu(t).add(1),tl(t),this.initialized=!0}record(e,t){if(!e.disabled)for(let n of e.sendInPings){let e=tu([n]),r=x._.metricsDatabase.getMetric(n,e);r||(e.add(1),r=1,tl([n],new Date)),t.addExtra(C.ky,r);let i=0,a=e=>{let n=null!=e?e:[];return n.push(t.get()),i=n.length,n};this.eventsStore.update([n],a),n===C.E1&&i>=x._.config.maxEvents&&x._.corePings.events.submit("max_capacity")}}getEvents(e,t){let n=this.getAndValidatePingData(e);if(0!==n.length)return n.filter(e=>e.get().category===t.category&&e.get().name===t.name).map(e=>e.withoutReservedExtras())}getPingEvents(e,t){let n=this.getAndValidatePingData(e);if(t&&Object.keys(n).length>0&&this.eventsStore.delete([e]),0===n.length)return;let r=this.prepareEventsPayload(e,n);if(r.length>0)return r}clearAll(){this.eventsStore.delete([])}getAvailableStoreNames(){let e=this.eventsStore.get([]);return(0,$.o8)(e)?[]:Object.keys(e)}getAndValidatePingData(e){let t=this.eventsStore.get([e]);return(0,$.o8)(t)?[]:Array.isArray(t)?t.reduce((e,t)=>{try{let n=new ts.K(t);return[...e,n]}catch(n){return(0,b.Z)(to,`Unexpected data found in events storage: ${JSON.stringify(t)}. Ignoring.`),e}},[]):((0,b.Z)(to,`Unexpected value found for ping ${e}: ${JSON.stringify(t)}. Clearing.`,b.G.Error),this.eventsStore.delete([e]),[])}prepareEventsPayload(e,t){var n,r,i,a;let s;let o=t.sort((e,t)=>{var n,r;let i=Number(null===(n=e.get().extra)||void 0===n?void 0:n[C.ky]),a=Number(null===(r=t.get().extra)||void 0===r?void 0:r[C.ky]);return i!==a?i-a:e.get().timestamp-t.get().timestamp});try{s=tc(null===(n=o[0].get().extra)||void 0===n?void 0:n[C.M6]),o.shift()}catch(e){s=x._.startTime}let l=(null===(r=o[0])||void 0===r?void 0:r.get().timestamp)||0,c=0;for(let[t,n]of o.entries()){let r;try{let r=tc(null===(i=n.get().extra)||void 0===i?void 0:i[C.M6]),a=r.getTime()-s.getTime();s=r;let l=c+a,u=o[t-1].get().timestamp;l<=u?(c=u+1,x._.errorManager.record(td([e]),eB.N.InvalidValue,`Invalid time offset between application sessions found for ping "${e}". Ignoring.`)):c=l}catch(e){}r=1===Number((null===(a=n.get().extra)||void 0===a?void 0:a[C.ky])||1)?n.get().timestamp-l:n.get().timestamp+c,o[t]=new ts.K({category:n.get().category,name:n.get().name,timestamp:r,extra:n.get().extra})}return(o=function(e){for(var t,n,r;e.length&&(null===(r=null===(n=null==(t=e[e.length-1])?void 0:t.get())||void 0===n?void 0:n.extra)||void 0===r?void 0:r[C.M6]);)e.pop();return e}(o)).map(e=>e.payload())}}var tf=n(75747);function th(e,t){let n=e.baseIdentifier(),r=(0,tf.ho)(n);return new e8({name:(0,tf.lb)(t,r),category:"glean.error",lifetime:"ping",sendInPings:e.sendInPings,disabled:!1})}class tp{record(e,t,n,r=1){let i=th(e,t);(0,b.Z)(function(e){let t=e.type.charAt(0).toUpperCase()+e.type.slice(1);return`core.metrics.${t}`}(e),[`${e.baseIdentifier()}:`,n]),r>0&&i.add(r)}testGetNumRecordedErrors(e,t,n){return th(e,t).testGetValue(n)||0}}let tm="core.glean_metrics";!function(e){let t={pageLoad:new ta.Z({category:"glean",name:"page_load",sendInPings:[C.E1],lifetime:"ping",disabled:!1},["url","referrer","title"]),elementClick:new ta.Z({category:"glean",name:"element_click",sendInPings:[C.E1],lifetime:"ping",disabled:!1},["id","type","label"]),pageId:new eQ({category:"glean",name:"page_id",sendInPings:[C.E1],lifetime:"application",disabled:!1})};function n(e){if(!x._.initialized){(0,b.Z)(tm,"Attempted to record element click event before Glean was initialized. This is a no-op.",b.G.Warn);return}t.elementClick.record(e)}e.pageLoad=function(e){var n,r,i;if(!x._.initialized){(0,b.Z)(tm,"Attempted to record a page load event before Glean was initialized. This is a no-op.",b.G.Warn);return}t.pageId.generateAndSet(),t.pageLoad.record({url:null!==(n=null==e?void 0:e.url)&&void 0!==n?n:"undefined"!=typeof window?window.location.href:"URL_NOT_PROVIDED_OR_AVAILABLE",referrer:null!==(r=null==e?void 0:e.referrer)&&void 0!==r?r:"undefined"!=typeof document?document.referrer:"REFERRER_NOT_PROVIDED_OR_AVAILABLE",title:null!==(i=null==e?void 0:e.title)&&void 0!==i?i:"undefined"!=typeof document?document.title:"TITLE_NOT_PROVIDED_OR_AVAILABLE"})},e.handleClickEvent=function(e){let t=e.target.closest("[data-glean-id], [data-glean-type], [data-glean-label]");t&&n(function(e){let t=e.dataset;return{...t.gleanId&&{id:t.gleanId},...t.gleanType&&{type:t.gleanType},...t.gleanLabel&&{label:t.gleanLabel}}}(t))},e.recordElementClick=n}(h||(h={}));var tb=h;let tv="core.Glean";(l=p||(p={})).DebugTag="DebugTag",l.SourceTags="SourceTags",l.LogPings="LogPings";let ty=(e,t)=>{let n=`Glean.${e.toString()}`;switch(e){case p.DebugTag:sessionStorage.setItem(n,t);break;case p.LogPings:sessionStorage.setItem(n,t.toString());break;case p.SourceTags:sessionStorage.setItem(n,t.join(","))}},tw=e=>sessionStorage.getItem(`Glean.${e.toString()}`)||void 0;!function(e){function t(){x._.uploadEnabled=!0,e.pingUploader.resumeUploads()}function n(e){let t;t=e?"at_init":"set_upload_enabled",x._.uploadEnabled=!1,x._.corePings.deletionRequest.submit(t),r()}function r(){let t;e.pingUploader.clearPendingPingsQueue();try{t=new eY(x._.metricsDatabase.getMetric(C.xW,x._.coreMetrics.firstRunDate)).date}catch(e){t=new Date}x._.eventsDatabase.clearAll(),x._.metricsDatabase.clearAll(),x._.pingsDatabase.clearAll(),x._.uploadEnabled=!0,x._.coreMetrics.clientId.set(C.Ei),x._.coreMetrics.firstRunDate.set(t),x._.uploadEnabled=!1}e.initialize=function(i,a,s){if(x._.initialized){(0,b.Z)(tv,"Attempted to initialize Glean, but it has already been initialized. Ignoring.",b.G.Warn);return}if(!(0,$.HD)(i)){(0,b.Z)(tv,"Unable to initialize Glean, applicationId must be a string.",b.G.Error);return}if(!(0,$.jn)(a)){(0,b.Z)(tv,"Unable to initialize Glean, uploadEnabled must be a boolean.",b.G.Error);return}if(0===i.length){(0,b.Z)(tv,"Unable to initialize Glean, applicationId cannot be an empty string.",b.G.Error);return}if(!x._.platform){(0,b.Z)(tv,"Unable to initialize Glean, platform has not been set.",b.G.Error);return}if(x._.coreMetrics=new e4,x._.corePings=new te,x._.applicationId=(0,$.hL)(i),x._.config=new A(s),function(){if("undefined"==typeof window||void 0===window.sessionStorage)return;let t=tw(p.LogPings);t&&(e.preInitLogPings=(0,$.pJ)(t));let n=tw(p.DebugTag);n&&(e.preInitDebugViewTag=n);let r=tw(p.SourceTags);r&&(e.preInitSourceTags=r.split(","))}(),e.preInitLogPings&&(x._.config.logPings=e.preInitLogPings),e.preInitDebugViewTag&&(x._.config.debugViewTag=e.preInitDebugViewTag),e.preInitSourceTags&&(x._.config.sourceTags=e.preInitSourceTags),x._.metricsDatabase=new ti,x._.eventsDatabase=new tg,x._.pingsDatabase=new eG,x._.errorManager=new tp,e.pingUploader=new eZ(x._.config,x._.pingsDatabase),x._.initialized=!0,x._.uploadEnabled=a,x._.eventsDatabase.initialize(),a)x._.metricsDatabase.clear("application"),t(),x._.coreMetrics.initialize(),(null==s?void 0:s.enableAutoPageLoadEvents)&&tb.pageLoad(),(null==s?void 0:s.enableAutoElementClickEvents)&&document.addEventListener("click",e=>{tb.handleClickEvent(e)});else{let e=x._.metricsDatabase.getMetric(C.xW,x._.coreMetrics.clientId);e?e!==C.Ei&&n(!0):r()}x._.pingsDatabase.scanPendingPings()},e.setUploadEnabled=function(e){if(!x._.initialized){(0,b.Z)(tv,["Changing upload enabled before Glean is initialized is not supported.\n","Pass the correct state into `initialize`.\n","See documentation at https://mozilla.github.io/glean/book/user/general-api.html#initializing-the-glean-sdk`"],b.G.Error);return}if(!(0,$.jn)(e)){(0,b.Z)(tv,"Unable to change upload state, new value must be a boolean. Ignoring.",b.G.Error);return}x._.uploadEnabled!==e&&(e?(t(),x._.coreMetrics.initialize()):n(!1))},e.setExperimentationId=function(e){x._.config.experimentationId=e},e.setLogPings=function(t){x._.initialized?x._.config.logPings=t:e.preInitLogPings=t},e.setDebugViewTag=function(t){x._.initialized?x._.config.debugViewTag=t:e.preInitDebugViewTag=t},e.setSourceTags=function(t){x._.initialized?x._.config.sourceTags=t:e.preInitSourceTags=t},e.setPlatform=function(e){x._.initialized||(x._.isPlatformSet()&&x._.platform.name!==e.name&&!x._.testing&&(0,b.Z)(tv,[`IMPOSSIBLE: Attempted to change Glean's targeted platform",
            "from "${x._.platform.name}" to "${e.name}". Ignoring.`],b.G.Error),x._.platform=e)}}(m||(m={})),"undefined"!=typeof window&&void 0!==window.sessionStorage&&(window.Glean={setLogPings:e=>{ty(p.LogPings,e),m.setLogPings(e),console.log("Pings will be logged to the console until this tab is closed.")},setDebugViewTag:e=>{ty(p.DebugTag,e),m.setDebugViewTag(e),console.log("Pings will be sent to the Debug Ping Viewer until this tab is closed. Pings can be found here: https://debug-ping-preview.firebaseapp.com/.")},setSourceTags:e=>{ty(p.SourceTags,e),m.setSourceTags(e),console.log("Pings will be given the specified tags until the tab is closed.")}});var t_=m,tS=(r={Storage:U,uploader:M,info:{os(){let e;return(navigator&&navigator.userAgent?e=navigator.userAgent:e="Unknown",e.includes("Windows"))?"Windows":/tvOS/i.test(e)?"TvOS":/Watch( OS)?/i.test(e)?"WatchOS":/iPhone|iPad|iOS/i.test(e)?"iOS":/Mac OS X|macOS/i.test(e)?"Darwin":/Android/i.test(e)?"Android":/CrOS/i.test(e)?"ChromeOS":/WebOS/i.test(e)?"WebOS":/Linux/i.test(e)?"Linux":/OpenBSD/i.test(e)?"OpenBSD":/FreeBSD/i.test(e)?"FreeBSD":/NetBSD/i.test(e)?"NetBSD":/SunOS/i.test(e)?"SunOS":/AIX/i.test(e)?"IBM_AIX":"Unknown"},osVersion:()=>"Unknown",arch:()=>"Unknown",locale:()=>navigator&&navigator.language?navigator.language:"und"},timer:{setTimeout,clearTimeout},name:"web"},{initialize(e,t,n){t_.setPlatform(r),t_.initialize(e,t,n)},setUploadEnabled(e){t_.setUploadEnabled(e)},setLogPings(e){t_.setLogPings(e)},setDebugViewTag(e){t_.setDebugViewTag(e)},setSourceTags(e){t_.setSourceTags(e)}})}}]);
//# sourceMappingURL=1915-db3787c637e60d82.js.map